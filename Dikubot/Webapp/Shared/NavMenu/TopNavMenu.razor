@namespace Dikubot.Webapp.Extensions.NavMenu
@using Dikubot.Webapp.Authentication
@using Dikubot.Discord
@using global::Discord.WebSocket
@using Dikubot.DataLayer.Database.Global.GuildSettings
@using Dikubot.DataLayer.Database.Global.User
@using Dikubot.Webapp.Pages
@using MudBlazor.Utilities
@using Data
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NotifyStateService _notifyStateService;




<MudAppBar Elevation="1" Style="background-color: #231b2f">
    <MudHidden Breakpoint="Breakpoint.Xs" Invert="true">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleDrawer"/>
        <MudSpacer/>
    </MudHidden>
    <MudButton Variant="Variant.Text"
               Href="/"> <MudText Typo="Typo.h5" Color="Color.Primary"> kuliv.dk</MudText></MudButton>
    
    <MudHidden Breakpoint="Breakpoint.SmAndUp" Invert="true">
        <MudButton Variant="Variant.Text"
                   Href="/discovery/unions">Foreninger</MudButton>
        <MudButton Variant="Variant.Text"
                   Href="/discovery/events">Events</MudButton>
        <MudButton Variant="Variant.Text"
                   Href="/discovery/calendar">Kalender</MudButton>
    </MudHidden>
                <MudSpacer/>
                <MudIconButton Icon="@Icons.Custom.Brands.GitHub" Color="Color.Inherit" Link="https://github.com/Faellesskabet/Discord-Botten" Target="_blank"/>

</MudAppBar>
       <MudDrawer @bind-Open="@open" Elevation="1" Variant="@DrawerVariant.Temporary" Style="@($"background-color: {NavColor}; color: {NavTextColor};")">
           <MudDrawerHeader>
               <MudText Typo="Typo.h6">kuLiv.dk</MudText>
           </MudDrawerHeader>
           <MudNavMenu>
               <MudNavLink Match="NavLinkMatch.All" Href="/discovery/unions">Foreninger</MudNavLink>
               <MudNavLink Match="NavLinkMatch.All" Href="/discovery/events">Events</MudNavLink>
               <MudNavLink Match="NavLinkMatch.All" Href="/discovery/calendar">Kalender</MudNavLink>
           </MudNavMenu>
       </MudDrawer>


@code {
    
    bool open = false;
    private string NavColor = "";
    private string NavTextColor = "";

    protected override async Task OnInitializedAsync()
    {
        NavColor = GetColor().Value;
        NavTextColor = GetTextColor().Value;
    }

    void ToggleDrawer()
    {
        open = !open;
    }
    
    private MudColor GetColor()
    {
        return App.ThemeProvider.IsDarkMode ? App.ThemeProvider.Theme.PaletteDark.Background : App.ThemeProvider.Theme.Palette.Background;
    }

    private MudColor GetTextColor()
    {
        return App.ThemeProvider.IsDarkMode ? App.ThemeProvider.Theme.PaletteDark.TextPrimary : App.ThemeProvider.Theme.Palette.TextPrimary;
    }

}